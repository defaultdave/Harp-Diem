import{j as e,c as u,A as j,u as p}from"./index-D0ko-fbh.js";import"./vendor-tonal-DnSdIcMw.js";import"./vendor-export-D7AaRv1i.js";import"./vendor-react-qkC6yhPU.js";const N="_quizPage_6o48r_1",g="_headerCard_6o48r_10",C="_title_6o48r_18",S="_description_6o48r_25",v="_controlsRow_6o48r_32",w="_difficultySection_6o48r_38",B="_scoreSection_6o48r_39",T="_sectionLabel_6o48r_48",L="_difficultyButtons_6o48r_59",A="_difficultyButton_6o48r_59",z="_difficultyButtonActive_6o48r_91",I="_scoreValue_6o48r_102",Q="_scoreCheckmark_6o48r_108",$="_scoreNumbers_6o48r_113",R="_scorePercentage_6o48r_119",D="_mainCard_6o48r_125",P="_instructionsSection_6o48r_137",K="_instructionsTitle_6o48r_145",G="_instructionsText_6o48r_152",F="_answerSection_6o48r_159",H="_answerGroup_6o48r_168",M="_answerLabel_6o48r_174",V="_keySelect_6o48r_180",q="_modeToggle_6o48r_208",E="_modeButton_6o48r_213",O="_modeButtonActive_6o48r_239",U="_controlsSection_6o48r_250",Y="_primaryButton_6o48r_257",J="_secondaryButton_6o48r_258",W="_feedbackCard_6o48r_321",X="_feedbackCorrect_6o48r_328",Z="_feedbackIncorrect_6o48r_333",ee="_feedbackHeader_6o48r_338",se="_feedbackIcon_6o48r_345",ne="_feedbackTitle_6o48r_357",ce="_feedbackText_6o48r_363",re="_feedbackChords_6o48r_369",s={quizPage:N,headerCard:g,title:C,description:S,controlsRow:v,difficultySection:w,scoreSection:B,sectionLabel:T,difficultyButtons:L,difficultyButton:A,difficultyButtonActive:z,scoreValue:I,scoreCheckmark:Q,scoreNumbers:$,scorePercentage:R,mainCard:D,instructionsSection:P,instructionsTitle:K,instructionsText:G,answerSection:F,answerGroup:H,answerLabel:M,keySelect:V,modeToggle:q,modeButton:E,modeButtonActive:O,controlsSection:U,primaryButton:Y,secondaryButton:J,feedbackCard:W,feedbackCorrect:X,feedbackIncorrect:Z,feedbackHeader:ee,feedbackIcon:se,feedbackTitle:ne,feedbackText:ce,feedbackChords:re},oe=["easy","medium","hard"];function te({difficulty:n,onDifficultyChange:c,disabled:o=!1}){return e.jsxs("div",{className:s.difficultySection,children:[e.jsx("span",{className:s.sectionLabel,children:"Difficulty"}),e.jsx("div",{className:s.difficultyButtons,role:"radiogroup","aria-label":"Select difficulty",children:oe.map(r=>e.jsx("button",{className:`${s.difficultyButton} ${n===r?s.difficultyButtonActive:""}`,onClick:()=>c(r),disabled:o,role:"radio","aria-checked":n===r,children:u(r)},r))})]})}function ae({correct:n,total:c}){const o=c>0?Math.round(n/c*100):0;return e.jsxs("div",{className:s.scoreSection,"aria-live":"polite",children:[e.jsx("span",{className:s.sectionLabel,children:"Score"}),e.jsxs("div",{className:s.scoreValue,children:[e.jsx("span",{className:s.scoreCheckmark,"aria-hidden":"true",children:"âœ“"}),e.jsxs("span",{className:s.scoreNumbers,children:[n," / ",c]}),c>0&&e.jsxs("span",{className:s.scorePercentage,children:["(",o,"%)"]})]})]})}function ie({selectedKey:n,selectedMode:c,onKeyChange:o,onModeChange:r,disabled:t=!1}){return e.jsxs("div",{className:s.answerSection,children:[e.jsxs("div",{className:s.answerGroup,children:[e.jsx("label",{htmlFor:"key-select",className:s.answerLabel,children:"Key:"}),e.jsx("select",{id:"key-select",className:s.keySelect,value:n,onChange:a=>o(a.target.value),disabled:t,children:j.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:s.answerGroup,children:[e.jsx("span",{className:s.answerLabel,children:"Mode:"}),e.jsxs("div",{className:s.modeToggle,role:"radiogroup","aria-label":"Select mode",children:[e.jsx("button",{className:`${s.modeButton} ${c==="major"?s.modeButtonActive:""}`,onClick:()=>r("major"),disabled:t,role:"radio","aria-checked":c==="major",children:"Major"}),e.jsx("button",{className:`${s.modeButton} ${c==="minor"?s.modeButtonActive:""}`,onClick:()=>r("minor"),disabled:t,role:"radio","aria-checked":c==="minor",children:"Minor"})]})]})]})}function le({phase:n,isAudioPlaying:c,onStartQuiz:o,onReplay:r,onCheckAnswer:t,onNextQuestion:a}){return n==="idle"?e.jsx("div",{className:s.controlsSection,children:e.jsxs("button",{className:s.primaryButton,onClick:o,children:[e.jsx("span",{"aria-hidden":"true",children:"â–¶"})," Start Quiz"]})}):n==="playing"||n==="answering"?e.jsxs("div",{className:s.controlsSection,children:[e.jsxs("button",{className:s.secondaryButton,onClick:r,disabled:c,"aria-describedby":c?"playing-status":void 0,children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ”„"})," Replay"]}),e.jsxs("button",{className:s.primaryButton,onClick:t,disabled:c,children:[e.jsx("span",{"aria-hidden":"true",children:"âœ“"})," Check Answer"]}),c&&e.jsx("span",{id:"playing-status",className:"sr-only",children:"Audio is currently playing"})]}):n==="revealed"?e.jsxs("div",{className:s.controlsSection,children:[e.jsxs("button",{className:s.secondaryButton,onClick:r,disabled:c,"aria-label":"Replay chord progression",children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ”„"})," Replay"]}),e.jsxs("button",{className:s.primaryButton,onClick:a,disabled:c,children:[e.jsx("span",{"aria-hidden":"true",children:"â†’"})," Next Question"]})]}):null}function de({isCorrect:n,question:c}){const o=u(c.mode),r=c.progression.map(t=>`${t.name} (${t.romanNumeral})`).join(" â†’ ");return e.jsxs("div",{className:`${s.feedbackCard} ${n?s.feedbackCorrect:s.feedbackIncorrect}`,"aria-live":"assertive",children:[e.jsxs("div",{className:s.feedbackHeader,children:[e.jsx("span",{className:s.feedbackIcon,"aria-hidden":"true",children:n?"âœ“":"âœ—"}),e.jsx("span",{className:s.feedbackTitle,children:n?"Correct!":"Incorrect"})]}),e.jsxs("p",{className:s.feedbackText,children:["The progression was in ",e.jsxs("strong",{children:[c.key," ",o]}),"."]}),e.jsxs("p",{className:s.feedbackChords,children:["Chords played: ",r]})]})}function he(){const{phase:n,difficulty:c,currentQuestion:o,userAnswer:r,isCorrect:t,score:a,isAudioPlaying:l,setDifficulty:_,setUserAnswer:d,startQuiz:m,checkAnswer:f,nextQuestion:h,replayProgression:b}=p(),x=i=>{r&&d({...r,key:i})},y=i=>{r&&d({...r,mode:i})},k=n==="playing"||n==="answering";return e.jsxs("div",{className:s.quizPage,children:[e.jsxs("div",{className:s.headerCard,children:[e.jsx("h2",{className:s.title,children:"Key Quiz"}),e.jsx("p",{className:s.description,children:"Listen to chord progressions and identify the key and mode."})]}),e.jsxs("div",{className:s.controlsRow,children:[e.jsx(te,{difficulty:c,onDifficultyChange:_,disabled:k}),e.jsx(ae,{correct:a.correct,total:a.total})]}),e.jsxs("div",{className:s.mainCard,children:[(n==="playing"||n==="answering")&&e.jsxs("section",{className:s.instructionsSection,"aria-label":"Quiz instructions",children:[e.jsx("p",{className:s.instructionsTitle,children:"Play along on your harmonica to find the matching key!"}),e.jsx("p",{className:s.instructionsText,children:"Select your answer using the Key dropdown and Mode buttons below."})]}),(n==="playing"||n==="answering"||n==="revealed")&&r&&e.jsx(ie,{selectedKey:r.key,selectedMode:r.mode,onKeyChange:x,onModeChange:y,disabled:n!=="answering"||l}),e.jsx(le,{phase:n,isAudioPlaying:l,onStartQuiz:m,onReplay:b,onCheckAnswer:f,onNextQuestion:h})]}),n==="revealed"&&o&&t!==null&&e.jsx(de,{isCorrect:t,question:o})]})}export{he as QuizPage};
