import{j as e,c as m,A as x,u as y}from"./index-CbBgG0Pd.js";import"./vendor-tonal-DnSdIcMw.js";import"./vendor-export-D7AaRv1i.js";import"./vendor-react-qkC6yhPU.js";const p="_quizPage_jmval_1",N="_headerCard_jmval_10",C="_title_jmval_18",g="_description_jmval_25",B="_controlsRow_jmval_32",S="_difficultySection_jmval_38",w="_scoreSection_jmval_39",A="_sectionLabel_jmval_48",T="_difficultyButtons_jmval_59",L="_difficultyButton_jmval_59",z="_difficultyButtonActive_jmval_91",I="_scoreValue_jmval_102",Q="_scoreCheckmark_jmval_108",$="_scoreNumbers_jmval_113",P="_scorePercentage_jmval_119",D="_mainCard_jmval_125",R="_answerSection_jmval_137",K="_answerGroup_jmval_146",G="_answerLabel_jmval_152",F="_keySelect_jmval_158",H="_modeToggle_jmval_186",V="_modeButton_jmval_191",q="_modeButtonActive_jmval_217",M="_controlsSection_jmval_228",E="_primaryButton_jmval_235",O="_secondaryButton_jmval_236",U="_feedbackCard_jmval_299",Y="_feedbackCorrect_jmval_306",J="_feedbackIncorrect_jmval_311",W="_feedbackHeader_jmval_316",X="_feedbackIcon_jmval_323",Z="_feedbackTitle_jmval_335",ee="_feedbackText_jmval_341",se="_feedbackChords_jmval_347",s={quizPage:p,headerCard:N,title:C,description:g,controlsRow:B,difficultySection:S,scoreSection:w,sectionLabel:A,difficultyButtons:T,difficultyButton:L,difficultyButtonActive:z,scoreValue:I,scoreCheckmark:Q,scoreNumbers:$,scorePercentage:P,mainCard:D,answerSection:R,answerGroup:K,answerLabel:G,keySelect:F,modeToggle:H,modeButton:V,modeButtonActive:q,controlsSection:M,primaryButton:E,secondaryButton:O,feedbackCard:U,feedbackCorrect:Y,feedbackIncorrect:J,feedbackHeader:W,feedbackIcon:X,feedbackTitle:Z,feedbackText:ee,feedbackChords:se},ae=["easy","medium","hard"];function ce({difficulty:a,onDifficultyChange:c,disabled:t=!1}){return e.jsxs("div",{className:s.difficultySection,children:[e.jsx("span",{className:s.sectionLabel,children:"Difficulty"}),e.jsx("div",{className:s.difficultyButtons,role:"radiogroup","aria-label":"Select difficulty",children:ae.map(n=>e.jsx("button",{className:`${s.difficultyButton} ${a===n?s.difficultyButtonActive:""}`,onClick:()=>c(n),disabled:t,role:"radio","aria-checked":a===n,children:m(n)},n))})]})}function ne({correct:a,total:c}){const t=c>0?Math.round(a/c*100):0;return e.jsxs("div",{className:s.scoreSection,"aria-live":"polite",children:[e.jsx("span",{className:s.sectionLabel,children:"Score"}),e.jsxs("div",{className:s.scoreValue,children:[e.jsx("span",{className:s.scoreCheckmark,"aria-hidden":"true",children:"âœ“"}),e.jsxs("span",{className:s.scoreNumbers,children:[a," / ",c]}),c>0&&e.jsxs("span",{className:s.scorePercentage,children:["(",t,"%)"]})]})]})}function te({selectedKey:a,selectedMode:c,onKeyChange:t,onModeChange:n,disabled:r=!1}){return e.jsxs("div",{className:s.answerSection,children:[e.jsxs("div",{className:s.answerGroup,children:[e.jsx("label",{htmlFor:"key-select",className:s.answerLabel,children:"Key:"}),e.jsx("select",{id:"key-select",className:s.keySelect,value:a,onChange:o=>t(o.target.value),disabled:r,children:x.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs("div",{className:s.answerGroup,children:[e.jsx("span",{className:s.answerLabel,children:"Mode:"}),e.jsxs("div",{className:s.modeToggle,role:"radiogroup","aria-label":"Select mode",children:[e.jsx("button",{className:`${s.modeButton} ${c==="major"?s.modeButtonActive:""}`,onClick:()=>n("major"),disabled:r,role:"radio","aria-checked":c==="major",children:"Major"}),e.jsx("button",{className:`${s.modeButton} ${c==="minor"?s.modeButtonActive:""}`,onClick:()=>n("minor"),disabled:r,role:"radio","aria-checked":c==="minor",children:"Minor"})]})]})]})}function re({phase:a,isAudioPlaying:c,onStartQuiz:t,onReplay:n,onCheckAnswer:r,onNextQuestion:o}){return a==="idle"?e.jsx("div",{className:s.controlsSection,children:e.jsxs("button",{className:s.primaryButton,onClick:t,children:[e.jsx("span",{"aria-hidden":"true",children:"â–¶"})," Start Quiz"]})}):a==="playing"||a==="answering"?e.jsxs("div",{className:s.controlsSection,children:[e.jsxs("button",{className:s.secondaryButton,onClick:n,disabled:c,"aria-describedby":c?"playing-status":void 0,children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ”„"})," Replay"]}),e.jsxs("button",{className:s.primaryButton,onClick:r,disabled:c,children:[e.jsx("span",{"aria-hidden":"true",children:"âœ“"})," Check Answer"]}),c&&e.jsx("span",{id:"playing-status",className:"sr-only",children:"Audio is currently playing"})]}):a==="revealed"?e.jsx("div",{className:s.controlsSection,children:e.jsxs("button",{className:s.primaryButton,onClick:o,children:[e.jsx("span",{"aria-hidden":"true",children:"â†’"})," Next Question"]})}):null}function oe({isCorrect:a,question:c}){const t=m(c.mode),n=c.progression.map(r=>`${r.name} (${r.romanNumeral})`).join(" â†’ ");return e.jsxs("div",{className:`${s.feedbackCard} ${a?s.feedbackCorrect:s.feedbackIncorrect}`,"aria-live":"assertive",children:[e.jsxs("div",{className:s.feedbackHeader,children:[e.jsx("span",{className:s.feedbackIcon,"aria-hidden":"true",children:a?"âœ“":"âœ—"}),e.jsx("span",{className:s.feedbackTitle,children:a?"Correct!":"Incorrect"})]}),e.jsxs("p",{className:s.feedbackText,children:["The progression was in ",e.jsxs("strong",{children:[c.key," ",t]}),"."]}),e.jsxs("p",{className:s.feedbackChords,children:["Chords played: ",n]})]})}function ue(){const{phase:a,difficulty:c,currentQuestion:t,userAnswer:n,isCorrect:r,score:o,isAudioPlaying:l,setDifficulty:u,setUserAnswer:d,startQuiz:_,checkAnswer:f,nextQuestion:j,replayProgression:h}=y(),v=i=>{n&&d({...n,key:i})},b=i=>{n&&d({...n,mode:i})},k=a==="playing"||a==="answering";return e.jsxs("div",{className:s.quizPage,children:[e.jsxs("div",{className:s.headerCard,children:[e.jsx("h2",{className:s.title,children:"Key Quiz"}),e.jsx("p",{className:s.description,children:"Listen to chord progressions and identify the key and mode."})]}),e.jsxs("div",{className:s.controlsRow,children:[e.jsx(ce,{difficulty:c,onDifficultyChange:u,disabled:k}),e.jsx(ne,{correct:o.correct,total:o.total})]}),e.jsxs("div",{className:s.mainCard,children:[(a==="playing"||a==="answering"||a==="revealed")&&n&&e.jsx(te,{selectedKey:n.key,selectedMode:n.mode,onKeyChange:v,onModeChange:b,disabled:a!=="answering"||l}),e.jsx(re,{phase:a,isAudioPlaying:l,onStartQuiz:_,onReplay:h,onCheckAnswer:f,onNextQuestion:j})]}),a==="revealed"&&t&&r!==null&&e.jsx(oe,{isCorrect:r,question:t})]})}export{ue as QuizPage};
